---
layout: default
---

{% include page_title.html %}
<div class="reading-progress">
  <div class="reading-progress-bar"></div>
</div>

{% include breadcrumbs.html %}
{% include series.html %}

<div class="post">
  <div class="post-content">
    {{ content }}
  </div>
  {% include author_box.html %}

  {% include related_posts.html %}
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".collapsible").forEach(btn => {
      btn.addEventListener("click", () => {
        btn.classList.toggle("active");
        const content = btn.nextElementSibling;
        if (content.style.maxHeight) {
          content.style.maxHeight = null;
        } else {
          content.style.maxHeight = content.scrollHeight + "px";
        }
      });
    });
  });
</script>
<script>
  document.addEventListener("scroll", () => {
    const content = document.querySelector(".post-content");
    const bar = document.querySelector(".reading-progress-bar");
    if (!content || !bar) return;

    const contentTop = content.offsetTop;
    const contentHeight = content.offsetHeight;
    const scrollY = window.scrollY;
    const windowHeight = window.innerHeight;

    const progress =
      (scrollY + windowHeight - contentTop) / contentHeight;

    const clamped = Math.min(Math.max(progress, 0), 1);
    bar.style.transform = `scaleX(${clamped})`;
  });
</script>

